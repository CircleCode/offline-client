<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE bindings [
      <!ENTITY % leaf-attributes-bindingDTD SYSTEM "chrome://dcpoffline/locale/leaf-attributes-binding.dtd" >
      <!ENTITY separator "&#160;:&#160;" >
      %leaf-attributes-bindingDTD;
]>

<bindings id="leaf-attributes-binding"
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    xmlns:xbl="http://www.mozilla.org/xbl">
    
    <binding id="leaf-attr" extends="chrome://dcpoffline/content/bindings/base-attributes.xml#base-attr">
        <implementation>
            <method name="setValue">
                <parameter name="value"/>
                <body><![CDATA[
                    this.doc.setValue(this.attrid, value);
                ]]></body>
            </method>
            <method name="getValue">
                <parameter name="defaultValue"/>
                <body><![CDATA[
                    return this.doc.getValue(this.attrid);
                ]]></body>
            </method>
            <method name="getDisplayValue">
                <body><![CDATA[
                    return this.doc.getDisplayValue(this.attrid);
                ]]></body>
            </method>
            <constructor><![CDATA[
                //this.getChild('rawValue').setAttribute('value', this.getValue());
                this.getChild('displayValue').value = this.getDisplayValue();
            ]]></constructor>
        </implementation>
    </binding>
    
    <!-- Text attributes -->
    
    <binding id="text-abstract" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#leaf-attr"/>

    <binding id="text" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#text-abstract">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute text">
                <xul:label anonid="label" class="dcplabel" value="__DEBUG__"/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:label anonid="displayValue" class="dcpValue" value=""/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="text-edit" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#text">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute text">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:textbox anonid="displayValue" class="dcpValue" multiline="false"/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="longtext" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#text-abstract">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute longtext">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:label anonid="displayValue" class="dcpValue"/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="longtext-edit" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#longtext">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute longtext">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:textbox anonid="displayValue" class="dcpValue" multiline="true"/>
            </xul:hbox>
        </content>
    </binding>
    
    <!-- TODO htmltext -->
    <binding id="htmltext" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#text-abstract"/>
    
    <!-- TODO htmltext-edit -->
    <binding id="htmltext-edit" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#htmltext"/>
    
    <!-- Numeric attributes -->
    
    <binding id="numeric-abstract" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#leaf-attr"/>
    
    <binding id="int" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#numeric-abstract">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute numeric int">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:label anonid="displayValue" class="dcpValue" value=""/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="int-edit" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#int">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute numeric int">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:textbox anonid="displayValue" class="dcpValue" value=""
                    type="number" hidespinbutton="true"
                    inherited="min,max"/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="double" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#numeric-abstract">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute numeric double">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:label anonid="displayValue" class="dcpValue" value=""/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="double-edit" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#double">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute numeric double">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:textbox anonid="displayValue" class="dcpValue" value=""
                    type="number" hidespinbutton="true" decimalplaces="Infinity"
                    inherited="min,max"/>
                <xul:textbox anonid="rawValue" value="" collapsed="true"/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="money" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#numeric-abstract">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute numeric double">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:label anonid="displayValue" class="dcpValue" value=""/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="money-edit" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#money">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute numeric double">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:textbox anonid="displayValue" class="dcpValue" value=""
                    type="number" hidespinbutton="true" decimalplaces="2"
                    inherited="min,max"/>
                <xul:textbox anonid="rawValue" value="" collapsed="true"/>
            </xul:hbox>
        </content>
    </binding>
    
    <!-- Date attributes -->
    
    <binding id="date" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#leaf-attr">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute date">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:datepicker anonid="displayValue" class="dcpValue" value="" disabled="true" readonly="true"/>
            </xul:hbox>
        </content>
    </binding>
    
    <binding id="date-edit" extends="chrome://dcpoffline/content/bindings/leaf-attributes.xml#date">
        <content>
            <xul:hbox xbl:inherits="attrid" flex="1" class="dcpAttribute date">
                <xul:label anonid="label" class="dcplabel" value=""/>
                <xul:label anonid="separator" class="dcpSeparator" value="&separator;"/>
                <xul:datepicker anonid="displayValue" class="dcpValue" value=""/>
            </xul:hbox>
        </content>
    </binding>
    
</bindings>